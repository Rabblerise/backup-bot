from gtts import gTTS                                   # –ò–º–ø–æ—Ä—Ç –º–æ–¥—É–ª—è –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è —Ç–µ–∫—Å—Ç–∞ –≤ —Ä–µ—á—å
from aiogram import Bot, Dispatcher, types, filters     # –ò–º–ø–æ—Ä—Ç Box, Dispatcher, types, filters –∏–∑ aiogram
from config import TELEGRAM_BOT_TOKEN                   # –ò–º–ø–æ—Ä—Ç —Ç–æ–∫–µ–Ω–∞ Telegram –∏–∑ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ç–æ—Ä–∞ Telegram
import os                                               # –ò–º–ø–æ—Ä—Ç –º–æ–¥—É–ª—è –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã

bot = Bot(token = TELEGRAM_BOT_TOKEN)                   # –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∫ –±–æ—Ç—É Telegram
dp = Dispatcher()                                       # –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—é-–¥–∏—Å–ø–µ—Ç—á–µ—Ä—É –±–æ—Ç–∞ Telegram

# –¢–µ–∫—Å—Ç –≥–æ–ª–æ—Å–æ–≤–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è
text = """
–° –ù–æ–≤—ã–º –ì–æ–¥–æ–º —Ç–µ–±—è! –ü—É—Å—Ç—å —ç—Ç–æ—Ç –≥–æ–¥ –±—É–¥–µ—Ç –ø–æ–ª–æ–Ω —Ä–∞–¥–æ—Å—Ç–∏, —É–¥–∞—á–∏ –∏ —Å–≤–µ—Ä—à–µ–Ω–∏–π. 
–ü—É—Å—Ç—å —Å–±—É–¥—É—Ç—Å—è –≤—Å–µ —Ç–≤–æ–∏ –º–µ—á—Ç—ã, –∞ –∫–∞–∂–¥—ã–π –¥–µ–Ω—å –ø—Ä–∏–Ω–µ—Å–µ—Ç —Ç–æ–ª—å–∫–æ –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—ã–µ –º–æ–º–µ–Ω—Ç—ã.

–° –Ω–∞—Å—Ç—É–ø–∞—é—â–∏–º! 
"""

@dp.message(filters.CommandStart())
async def send_welcome(message: types.Message):
    """–§—É–Ω–∫—Ü–∏—è –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏—è –ø—Ä–∏–≤–µ—Å—Ç–≤–∏—è"""
    await message.reply("""–ó–¥—Ä–∞–≤—Å—Ç–≤—É–π! üåü –í —ç—Ç–æ—Ç —Ä–æ–∂–¥–µ—Å—Ç–≤–µ–Ω—Å–∫–∏–π –ø–µ—Ä–∏–æ–¥ –º—ã –¥–æ–±–∞–≤–ª—è–µ–º –Ω–µ–º–Ω–æ–≥–æ –º–∞–≥–∏–∏ –∫ –æ–±—Ä–∞—â–µ–Ω–∏—è–º. –ö–∞–∫ –±—ã —Ç—ã —Ö–æ—Ç–µ–ª(–∞) –±—ã—Ç—å –Ω–∞–∑–≤–∞–Ω(–∞) –≤ —ç—Ç–æ—Ç –ø—Ä–∞–∑–¥–Ω–∏—á–Ω—ã–π —Å–µ–∑–æ–Ω?""")

@dp.message()
async def echo(message: types.Message):
    """–§—É–Ω–∫—Ü–∏—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –æ—Ç–≤–µ—Ç–Ω–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è"""
    welcome = f"–ü—Ä–∏–≤–µ—Ç, {message.text}. "               # –¢–µ–∫—Å—Ç –ø—Ä–∏–≤–µ—Ç—Å–∏–≤—è 
    tts = gTTS(welcome + text, lang = "ru")             # –ü—Ä–∏–µ–º –∏ –æ–∑–≤—É—á–∏–≤–∞–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞ –Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ
    tts.save(f"{message.from_user.id}.mp3")             # –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∞—É–¥–∏–æ–∑–∞–ø–∏—Å–∏
    
    # –û—Ç–ø—Ä–∞–≤–∫–∞ –≥–æ–ª–æ—Å–æ–≤–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è 
    await message.answer_voice(types.FSInputFile(f"{message.from_user.id}.mp3"), caption="–ü—Ä–∏–≤–µ—Ç, –¥–æ—Ä–æ–≥–æ–π –¥—Ä—É–≥! –° –Ω–∞—Å—Ç—É–ø–∞—é—â–∏–º –ù–æ–≤—ã–º –≥–æ–¥–æ–º! üéÑ‚ú® –î–∞–≤–∞–π –ø—Ä–æ–≤–µ–¥–µ–º –≤–º–µ—Å—Ç–µ —ç—Ç–æ—Ç –≤–æ–ª—à–µ–±–Ω—ã–π –ø—Ä–∞–∑–¥–Ω–∏–∫. –ü–æ—Å–ª—É—à–∞–π –º–µ–Ω—è: –≤ –Ω–æ–≤–æ–≥–æ–¥–Ω—é—é –Ω–æ—á—å —Å–±—É–¥–µ—Ç—Å—è –º–Ω–æ–∂–µ—Å—Ç–≤–æ –∂–µ–ª–∞–Ω–∏–π, –∏ –∫–∞–∂–¥—ã–π —Å–Ω–µ–∂–∏–Ω–∫–∞ –ø—Ä–∏–Ω–µ—Å–µ—Ç —Å —Å–æ–±–æ–π —Ä–∞–¥–æ—Å—Ç—å –∏ —É—é—Ç. –ü—É—Å—Ç—å —ç—Ç–æ—Ç –≥–æ–¥ –±—É–¥–µ—Ç –ø–æ–ª–æ–Ω —Å–º–µ—Ö–∞, –≤–¥–æ—Ö–Ω–æ–≤–µ–Ω–∏—è –∏ –ø—Ä–∏—è—Ç–Ω—ã—Ö —Å—é—Ä–ø—Ä–∏–∑–æ–≤. –° –Ω–∞—Å—Ç—É–ø–∞—é—â–∏–º –ù–æ–≤—ã–º –≥–æ–¥–æ–º! üéÖüéâ")
    # –û—Ç–ø—Ä–∞–≤–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
    await message.answer_photo(types.FSInputFile(f"image/{os.listdir('image')[0]}"))


async def startBot():
    """–§—É–Ω–∫—Ü–∏—è –∑–∞–ø—É—Å–∫–∞ –±–æ—Ç–∞"""
    await dp.start_polling(bot, skip_updates = True) 